CKEDITOR.plugins.add("wordcount",{lang:"ca,de,en,es,fr,it,jp,nl,no,pl,pt-br,ru,sv",version:1.1,init:function(n){function t(n){return"cke_wordcount_"+n.name}function e(n){return document.getElementById(t(n))}function o(n){var t=document.createElement("div");return t.innerHTML=n,""==t.textContent&&"undefined"==typeof t.innerText?"":t.textContent||t.innerText}function r(t){var r,a,c=0,s=0;if(a=t.getData()){if(l.showCharCount)if(l.countHTML)s=a.length;else{if(n.config.fullPage){var d=a.search(new RegExp("<body>","i"));if(-1!=d){var h=a.search(new RegExp("</body>","i"));a=a.substring(d+6,h)}}r=a.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+|\s+$/g,"").replace("&nbsp;",""),l.countSpacesAsChars||(r=a.replace(/\s/g,"")),r=o(r).replace(/^([\s\t\r\n]*)$/,""),s=r.length}if(l.showWordCount){r=a.replace(/(\r\n|\n|\r)/gm," ").replace(/^\s+|\s+$/g,"").replace("&nbsp;"," "),r=o(r);for(var C=r.split(/\s+/),f=C.length-1;f>=0;f--)C[f].match(/^([\s\t\r\n]*)$/)&&C.splice(f,1);c=C.length}}var g=p.replace("%wordCount%",c).replace("%charCount%",s);return n.plugins.wordcount.wordCount=c,n.plugins.wordcount.charCount=s,e(t).innerHTML=g,s==i?!0:(u=c,i=s,!0)}if(n.elementMode!==CKEDITOR.ELEMENT_MODE_INLINE){var a,u,c='<span class="cke_path_item">',i=0,s={showWordCount:!0,showCharCount:!1,countSpacesAsChars:!1,countHTML:!1},l=CKEDITOR.tools.extend(s,n.config.wordcount||{},!0);if(l.showCharCount){var d=n.lang.wordcount[l.countHTML?"CharCountWithHTML":"CharCount"];c+=d+"&nbsp;%charCount%"}l.showCharCount&&l.showWordCount&&(c+=",&nbsp;"),l.showWordCount&&(c+=n.lang.wordcount.WordCount+" %wordCount%"),c+="</span>";var p=c;CKEDITOR.document.appendStyleSheet(this.path+"css/wordcount.css"),n.on("key",function(t){"source"===n.mode&&r(t.editor)},n,null,100),n.on("change",function(n){r(n.editor)},n,null,100),n.on("uiSpace",function(e){"bottom"==e.data.space&&(e.data.html+='<div id="'+t(e.editor)+'" class="cke_wordcount" style="" title="'+n.lang.wordcount.title+'">&nbsp;</div>')},n,null,100),n.on("dataReady",function(n){r(n.editor)},n,null,100),n.on("afterPaste",function(n){r(n.editor)},n,null,100),n.on("blur",function(){a&&window.clearInterval(a)},n,null,300),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}}});